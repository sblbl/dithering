<link rel="stylesheet" href="/assets/styles.css">

# Loyd-Steinberg Error Diffusion Dithering Script

Just a handcrafted script for image dithering, not generated by AI ðŸ‘Œ

![pingu painting](https://c.tenor.com/xP_nPC9TBYYAAAAd/tenor.gif)

## Instructions

```
cd [REPO]
python3 dither.py [IMAGE_PATH]
```

## How it works

Image dithering is a processing technique that, usually, converts a color or grayscale image into a black and white one. Transformations like dithering treat images as bidimensional matrixes with a number of columns and rows equal to their width and height. Each element in this matrix contains the color value of one pixel.

The most naÃ¯ve approach for dithering is _threshold_, that simply convert a pixel value to black (0) or white (255) according to its value with respect of a threshold (usually 128, half of the number of gray tones that is 256). This strategy, however, produces high-contrast images where a lot of detail is lost.

Dithering with error diffusion, instead, diffuses the _quantisation error_ among pixels, that is the error of the approximation from grayscale to bitmap of a pixel is distributed among the surrounding pixels. Many error diffusion methods are available, and among them one of the most used is Loyd-Steinberg dithering.

<table>
  <caption>
    Dithering techniques in comparison
  </caption>
    <thead>
        <tr>
            <th scope="col">original</th>
            <th scope="col">threshold</th>
            <th scope="col">error diffusion</th>
        </tr>
        <tbody>
            <tr>
                <td><img src="/assets/original.jpeg"></td>
                <td><img src="/assets/threshold.png"></td>
                <td><img src="/assets/dithered.png"></td>
            </tr>
        </tbody>
  </thead>
</table>

### Loyd-Steinberg dithering

An image can be represented as a matrix of pixels. The following, for example, is a 5 x 5 pixels image.

<img src="/assets/image-as-matrix.svg" alt="image as matrix">

In picture, the yellow cell represent the current pixel, whose error has been calculated. That error is spreaded among the 4 surrounding pixels that still haven't been parsed: the next to the right, the one right at the bottom, and the ones on the bottom left and right. The error value is divided in 16s and distributed in respectively 7/16 (right), 3/16 (bottom left), 5/16 (bottom), 1/16 (bottom right). These values come directly from Loyd-Steinberg's algorithm.

<img src="/assets/error-diffusion-matrix.svg" alt="error diffusion">

Loyd-Steinberg error diffusion dithering proceeds from left to right, and from top to bottom of an image, one pixel at a time, calculating the error for that pixel and distributing it among the surrounding next pixels.

<img src="/assets/processing-order.svg" alt="processing order">

When a pixel is processed by the algorithm, its grayscale value (0-255) is compared to a threshold, in this case 128; if the value is greater than the threshold, the pixel becomes white (255), otherwhise black (0).
